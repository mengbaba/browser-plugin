import{s as r}from"./storage.js";const o="followItem",c="operationPlugin";chrome.tabs.onActivated.addListener(t=>{chrome.tabs.get(t.tabId,async e=>{if(e.id){chrome.scripting.executeScript({target:{tabId:e.id},files:["assets/content.ts-loader.js"]});const n=await r.get("followColor");n!=null&&n.followColor&&chrome.tabs.sendMessage(e.id,{type:n.followColor})}})});chrome.commands.onCommand.addListener(t=>{chrome.tabs.query({active:!0,currentWindow:!0},function(e){chrome.tabs.sendMessage(Number(e[0].id),{type:t})})});chrome.action.onClicked.addListener(()=>{chrome.tabs.query({active:!0,currentWindow:!0},function(t){chrome.tabs.sendMessage(Number(t[0].id),{type:c})})});chrome.contextMenus.onClicked.addListener((t,e)=>{r.set({followColor:t.menuItemId}),chrome.tabs.sendMessage(Number(e==null?void 0:e.id),{type:t.menuItemId})});console.log("worker load");function s(){chrome.contextMenus.create({id:o,title:"改变跟随小球背景色",contexts:["all"]}),chrome.contextMenus.create({parentId:o,id:"black",title:"黑色",contexts:["all"]}),chrome.contextMenus.create({parentId:o,id:"red",title:"红色",contexts:["all"]}),chrome.contextMenus.create({parentId:o,id:"green",title:"绿色",contexts:["all"]}),chrome.contextMenus.create({parentId:o,id:"yellow",title:"黄色",contexts:["all"]})}chrome.runtime.onInstalled.addListener(()=>{console.log("首次安装插件"),s()});
