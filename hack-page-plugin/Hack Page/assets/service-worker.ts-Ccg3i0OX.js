function n(e){chrome.storage.local.set(e,()=>{console.log("保存成功")})}async function r(e){try{return await chrome.storage.local.get(e)}catch{return null}}async function a(e){try{return await chrome.storage.local.remove(e),!0}catch{return!1}}async function i(){try{return await chrome.storage.local.clear(),!0}catch{return!1}}const c={set:n,get:r,remove:a,clear:i};console.log("load hack");chrome.runtime.onInstalled.addListener(()=>{c.set({isActive:!1})});function s(e){chrome.action.setIcon({path:{16:e,48:e,128:e}})}chrome.action.onClicked.addListener(async()=>{let e=!1;console.log("点击了icon");const t=await c.get("isActive");t!=null&&t.isActive?(e=!1,c.set({isActive:!1}),s("src/assets/default_icon.png")):(e=!0,c.set({isActive:!0}),s("src/assets/open_icon.png")),chrome.tabs.query({active:!0,currentWindow:!0},function(o){chrome.tabs.sendMessage(Number(o[0].id),{type:e})})});
